###############################################
# MoveIt Servo configuration for ikarus_simplified
###############################################
moveit_servo:
  ros__parameters:
    use_gazebo: false

    ## Incoming command properties
    command_in_type: "speed_units" # interpret Twist/Pose commands in m/s and rad/s
    scale:
      linear: 0.4   # max linear velocity [m/s]
      rotational: 0.8  # max angular velocity [rad/s]
      joint: 0.5    # max joint velocity scaling for joint-space input

    ## Outgoing command properties
    publish_period: 0.01
    low_latency_mode: true
    command_out_type: trajectory_msgs/JointTrajectory
    publish_joint_positions: true
    publish_joint_velocities: false
    publish_joint_accelerations: false
    smoothing_filter_plugin_name: "online_signal_smoothing::ButterworthFilterPlugin"
    is_primary_planning_scene_monitor: true

    ## MoveIt frames/groups
    move_group_name: arm
    planning_frame: base_link
    ee_frame_name: ee_virtual
    robot_link_command_frame: base_link

    ## Stop behaviour
    incoming_command_timeout: 0.1
    num_outgoing_halt_msgs_to_publish: 4

    ## Singularity / joint limit handling
    lower_singularity_threshold: 17.0
    hard_stop_singularity_threshold: 30.0
    joint_limit_margin: 0.1
    leaving_singularity_threshold_multiplier: 2.0

    ## Topics
    cartesian_command_in_topic: ~/delta_twist_cmds
    joint_command_in_topic: ~/delta_joint_cmds
    joint_topic: /joint_states
    status_topic: ~/status
    command_out_topic: /arm_controller/joint_trajectory

    ## Collision checking
    check_collisions: true
    collision_check_rate: 50.0
    self_collision_proximity_threshold: 0.02
    scene_collision_proximity_threshold: 0.03
